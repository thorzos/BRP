<section class="form-page-section">
  <div class="form-page-card">
    <div class="form-page-card__body">
      <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>Action Failed</strong><br>
        <span [innerHTML]="errorMessage"></span>
        <button type="button" (click)="vanishError()" class="btn-close" aria-label="Close"></button>
      </div>

      <h3 class="form-page-card__title">Property Information</h3>

      <form [formGroup]="propertyForm" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label for="address" class="form-label">Address</label>
          <input type="text" id="address" formControlName="address" class="form-control"
                 [ngClass]="{ 'is-invalid': submitted && form.address.errors }"/>
          <div *ngIf="submitted && form.address.errors" class="invalid-feedback">
            <div *ngIf="form.address.errors.required">Address is required.</div>
            <div *ngIf="form.address.errors.serverError">{{ form.address.errors.serverError }}</div>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Location</label>
          <app-area-finder [parentForm]="propertyForm"></app-area-finder>
          <div *ngIf="submitted" class="text-danger small mt-1">
            <div *ngIf="form.countryCode.errors?.required">Country is required.</div>
            <div *ngIf="form.countryCode.errors?.serverError">{{ form.countryCode.errors.serverError }}</div>
            <div *ngIf="form.postalCode.errors?.required">Postal code is required.</div>
            <div *ngIf="form.postalCode.errors?.serverError">{{ form.postalCode.errors.serverError }}</div>
            <div *ngIf="form.area.errors?.serverError">{{ form.area.errors.serverError }}</div>
          </div>
        </div>

        <div class="d-grid gap-2 mt-4">
          <button type="submit" class="btn btn--secondary">{{ submitButtonText }}</button>
          <button type="button" routerLink="/customer/edit" class="btn btn--outline">Cancel</button>
        </div>

      </form>
    </div>
  </div>
</section>
